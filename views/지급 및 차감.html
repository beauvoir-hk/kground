<!DOCTYPE html>
<!-- saved from url=(0038)https://adt.kground.kr/Manage/ManagePD -->
<html lang="ko"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<meta name="theme-color" content="#EBAE2B">
<meta name="robots" content="index,follow,noodp">
<meta name="googlebot" content="index,follow">
<meta name="google" value="notranslate">
<meta name="application-name" content="ADMIN-CCPAY">
<meta name="msapplication-navbutton-color" content="#EBAE2B">
<meta name="apple-mobile-web-app-status-bar-style" content="#EBAE2B">
<meta name="apple-mobile-web-app-title" content="ADMIN-CCPAY">
<meta property="og:type" content="website">
<meta property="og:title" content="ADMIN-CCPAY">
<meta property="og:type" content="website">
<meta name="twitter:title" content="ADMIN-CCPAY">
<meta name="google-site-verification" content="nsfgUvWKe3ZrzY9zlA3qox3JRijvb_IJ-VNqKm3qe6c">
<link rel="stylesheet" type="text/css" href="./지급 및 차감_files/all.min.css">
<link rel="stylesheet" type="text/css" href="./지급 및 차감_files/jquery-ui.min.css">
<link rel="stylesheet" type="text/css" href="./지급 및 차감_files/bootstrap-select.min.css">
<link rel="stylesheet" type="text/css" href="./지급 및 차감_files/bootstrap-reboot.min.css">
<link rel="stylesheet" type="text/css" href="./지급 및 차감_files/bootstrap-grid.min.css">
<link rel="stylesheet" type="text/css" href="./지급 및 차감_files/bootstrap.min.css">
<link rel="stylesheet" type="text/css" href="./지급 및 차감_files/googleFont_Material-icon.css">
<link rel="stylesheet" type="text/css" href="./지급 및 차감_files/style.min.css">
<script type="text/javascript" src="./지급 및 차감_files/jquery-3.4.1.min.js.다운로드"></script>
<script type="text/javascript" src="./지급 및 차감_files/jquery-ui.min.js.다운로드"></script>
<script type="text/javascript" src="./지급 및 차감_files/popper.min.js.다운로드"></script>
<script type="text/javascript" src="./지급 및 차감_files/bootstrap.min.js.다운로드"></script>
<script type="text/javascript" src="./지급 및 차감_files/bootstrap-select.min.js.다운로드"></script>
<script type="text/javascript" src="./지급 및 차감_files/jquery.cookie.js.다운로드"></script>
<script type="text/javascript" src="./지급 및 차감_files/datepicker-ko.js.다운로드"></script>
<script type="text/javascript" src="./지급 및 차감_files/date-ko-KR.js.다운로드"></script>
<script type="text/javascript" src="./지급 및 차감_files/validation.js.다운로드"></script>
<script type="text/javascript" src="./지급 및 차감_files/common.js.다운로드"></script>
<script type="text/javascript" src="./지급 및 차감_files/paging.js.다운로드"></script>
<title>지급 및 차감</title>
</head>
<body>
<div>
<div id="sidebar">
<div class="user-info-box">
<div class="user-info">
<a href="https://adt.kground.kr/Admin/Info">
<p class="username">tohkpark</p>
</a>
</div>
<div class="bottom-box">
<a class="go-home-link" href="http://kground.kr/" target="_blank">홈페이지로 가기</a>
<div class="logout-box" onclick="if (!window.__cfRLUnblockHandlers) return false; CallSubmit(false, &#39;logout&#39;, &#39;post&#39;, &#39;json&#39;)">
<img src="./지급 및 차감_files/icon-logout.svg" alt="로그아웃 아이콘">
<p>로그아웃</p>
</div>
</div>
</div>
<div class="menu-box">
<div class="menu-row">
<div class="menu-title" id="menu0">
<button class="collapsed" type="button" data-toggle="collapse" data-target="#collapse0" aria-expanded="false" aria-controls="collapse">
기본<i class="g-arrow right"></i>
</button>
</div>
<div id="collapse0" class="collapse" aria-labelledby="menu0" data-parent="#sidebar">
<ul class="menu-list">
<li>
<a href="https://adt.kground.kr/Admin/DashBoard">
대시보드
</a>
</li>
<li>
<a href="https://adt.kground.kr/Admin/MemberList">
회원목록
</a>
</li>
</ul>
</div>
</div>
</div>
<div class="menu-box">
<div class="menu-row">
<div class="menu-title" id="menu1">
<button class="active" type="button" data-toggle="collapse" data-target="#collapse1" aria-expanded="true" aria-controls="collapse">
관리<i class="g-arrow right"></i>
</button>
</div>
<div id="collapse1" class="collapse show" aria-labelledby="menu1" data-parent="#sidebar">
<ul class="menu-list">
<li class="active">
<a href="https://adt.kground.kr/Manage/ManagePD">
지급 및 차감
</a>
</li>
<li>
<a href="https://adt.kground.kr/Manage/Settings">
환경설정
</a>
</li>
<li>
<a href="https://adt.kground.kr/NoticeBoard/TermsOfUseWrite">
이용약관
</a>
</li>
<li>
<a href="https://adt.kground.kr/NoticeBoard/PrivacyPolicyWrite">
개인정보 처리방침
</a>
</li>
</ul>
</div>
</div>
</div>
<div class="menu-box">
<div class="menu-row">
<div class="menu-title" id="menu2">
<button class="collapsed" type="button" data-toggle="collapse" data-target="#collapse2" aria-expanded="false" aria-controls="collapse">
내역<i class="g-arrow right"></i>
</button>
</div>
<div id="collapse2" class="collapse" aria-labelledby="menu2" data-parent="#sidebar">
<ul class="menu-list">
<li>
<a href="https://adt.kground.kr/List/DWList">
입/출금 내역
</a>
</li>
<li>
<a href="https://adt.kground.kr/List/CsList">
CS 관리
</a>
</li>
</ul>
</div>
</div>
</div>
<div class="menu-box">
<div class="menu-row">
<div class="menu-title" id="menu3">
<button class="collapsed" type="button" data-toggle="collapse" data-target="#collapse3" aria-expanded="false" aria-controls="collapse">
게시판<i class="g-arrow right"></i>
</button>
</div>
<div id="collapse3" class="collapse" aria-labelledby="menu3" data-parent="#sidebar">
<ul class="menu-list">
<li>
<a href="https://adt.kground.kr/NoticeBoard/Notice">
공지사항
</a>
</li>
</ul>
</div>
</div>
</div>
</div>
<script type="text/javascript">
	$(function () {

		//var menuTitle = ['메뉴1', '메뉴2', '메뉴3', '메뉴4'];

		//images.forEach(function (item, idx) {
		//	var container = $(".menu-box");
		//	var data = "<div class='menu-row'>\
		//				<div class='menu-title' id='menu"+ idx + "' >\
		//					<button class='collapsed' type='button' data-toggle='collapse' data-target='#collapse"+ idx + "' aria-expanded='false' aria-controls='collapse" + idx + "'>\
		//						"+ menuTitle[idx] + "\
		//						<i class='g-arrow right'></i>\
		//					</button>\
		//				</div >\
		//				<div id='collapse"+ idx + "' class='collapse' aria-labelledby='menu" + idx + "' data-parent='#sidebar'>\
		//					<ul class='menu-list'>\
		//						"+ item.map(function (list) {
		//			return "<li><a href='/views/" + list.img + ".html'><img src='/Content/static/images/menu-" + list.img + ".svg' alt='" + list.title + "아이콘'/>" + list.title + "</a></li>"
		//		}) + "\
		//					</ul>\
		//				</div>\
		//			</div >";

		//	return container.append(data);

		//});

		//url에 따라 자동으로 메뉴 펼쳐주기
		$(".menu-list li a").each(function () {
			var full_path = location.href.toLowerCase();
			var $this = $(this);

			if ($this.prop("href").toLowerCase() == full_path) {
				commonFun($this);
				return false;
			} else if (full_path.includes("memberdetail")) {
				var menu = $(".menu-list li a[href='/Admin/MemberList']");
                commonFun(menu);
				return false;
			} else if (full_path.includes("inquire")) {
                var menu = $(".menu-list li a[href='/NoticeBoard/Inquire']");
                commonFun(menu);
				return false;
            } else if (full_path.includes("termsofusewrite")) {
                var menu = $(".menu-list li a[href='/NoticeBoard/TermsOfUseWrite']");
                commonFun(menu);
                return false;
            } else if (full_path.includes("privacypolicywrite")) {
                var menu = $(".menu-list li a[href='/NoticeBoard/PrivacyPolicyWrite']");
				commonFun(menu);
				return false;
            } else if (full_path.includes("mainnoticewrite")) {
                var menu = $(".menu-list li a[href='/NoticeBoard/MainNoticeWrite']");
                commonFun(menu);
                return false;
			} else if (full_path.includes("noticewrite") || full_path.includes("noticeedit") || full_path.includes("notice")) {
				var menu_param = $("#notice_code").val();
                var menu = $(".menu-list li a[href='/NoticeBoard/Notice?notice_code=" + menu_param + "']");
                if (menu.length < 1) {
                    menu = $(".menu-list li a[href='/NoticeBoard/Notice']");
                }
                commonFun(menu);
				return false;
			} else if (full_path.includes("centerdetail")) {
                var menu = $(".menu-list li a[href='/List/CenterList']");
                commonFun(menu);
				return false;
			}
			else if (full_path.includes("prefectdetail")) {
                var menu = $(".menu-list li a[href='/List/PrefectList']");
                commonFun(menu);
				return false;
			}
            else if (full_path.includes("packageproductdetail") || full_path.includes("packageproductlist") || full_path.includes("packageproductregist")) {
				var menu_param = $("#sort_turn").val();
				var menu = $(".menu-list li a[href='/List/PackageProductList?sort_turn=" + menu_param + "']");

				if (menu.length < 1) {
                    menu = $(".menu-list li a[href='/List/PackageProductList']");
				}
                commonFun(menu);
				return false;
			}
			else if (full_path.includes("productdetail")) {
                var menu = $(".menu-list li a[href='/List/ProductList']");
                commonFun(menu);
				return false;
			}
			else if (full_path.includes("producttransactiondetail")) {
                var menu = $(".menu-list li a[href='/List/ProductTransactionList']");
                commonFun(menu);
				return false;
			}
			else if (full_path.includes("productpossessiondetail")) {
                var menu = $(".menu-list li a[href='/List/ProductPossessionList']");
                commonFun(menu);
				return false;
			}
			else if (full_path.includes("packageusedetail")) {
                var menu_param = $("#sort_turn").val();
                var menu = $(".menu-list li a[href='/List/PackageUseList?sort_turn=" + menu_param + "']");
                if (menu.length < 1) {
                    menu = $(".menu-list li a[href='/List/PackageUseList']");
                }
                commonFun(menu);
				return false;
			}
			else if (full_path.toLowerCase().indexOf("/admin/dashboard") !== -1) {
                var menu = $(".menu-list li a[href='/Admin/DashBoard']");
                commonFun(menu);
				return false;
			}
            else if (full_path.toLowerCase().indexOf("/admin/dailydashboard") !== -1) {
                var menu = $(".menu-list li a[href='/Admin/DailyDashBoard']");
                commonFun(menu);
                return false;
            }
			else if (full_path.toLowerCase().indexOf("/manage/settings") !== -1) {
                var menu = $(".menu-list li a[href='/Manage/Settings']");
                commonFun(menu);
				return false;
			}
			else if (full_path.toLowerCase().indexOf("/manage/pointdetail") !== -1) {
                var menu = $(".menu-list li a[href='/Manage/ManagePoint']");
                commonFun(menu);
				return false;
			}
			else if (full_path.toLowerCase().indexOf("/list/lockupdetail") !== -1) {
                var menu = $(".menu-list li a[href='/List/LockupList']");
                commonFun(menu);
				return false;
			}
            else if (full_path.includes("/list/csinfo") || full_path.includes("/list/csregist")) {
                var menu = $(".menu-list li a[href='/List/CsList']");
                commonFun(menu);
                return false;
			}
            else if (full_path.includes("/master/csinfo") || full_path.includes("/master/csregist")) {
                var menu = $(".menu-list li a[href='/Master/CsList']");
                commonFun(menu);
                return false;
            }
		});

		$(".menu-title button").click(function () {
			menuIconChange($(this));
		});
	});

	function commonFun(elm) {
		elm.parent().addClass("active");

		var menuItemsBox = elm.parents(".collapse");
		var menuBox = elm
			.parents(".collapse")
			.siblings(".menu-title")
			.children("button");

		menuItemsBox.addClass("show");
		menuBox.attr({
			class: "active",
			"aria-expanded": true
		});

		menuIconChange(menuBox);
	}

	function menuIconChange($this) {
		var btns = $(".menu-title button");
		var btn = $this;
		var arrowIcons = $(".menu-title button .g-arrow");
		var arrowIcon = $this.children(".g-arrow");
		var contentsOpen = arrowIcon.parent().parent().next('div').hasClass("show");

		arrowIcons.attr("class", "g-arrow right");
		arrowIcon.attr("class", "g-arrow down");
		btns.removeClass("active");
		btn.addClass("active");

		if (contentsOpen) {
			arrowIcon.removeClass("down");
			arrowIcon.addClass("right");
		}
	}
</script></div>
<form name="frm" id="frm" method="post" enctype="multipart/form-data">
<input name="__RequestVerificationToken" type="hidden" value="q_ZqZ07KeeIvFSBUKoPscy8BmWWK-e_N1Z3WoW1OfbgXAbLEU_amGDw2piCwHRlIibTqjWIcG74EmJZ2vRVI_SLiipk1">
<input type="text" style="display:none;visibility:hidden;">
<input type="hidden" name="page" id="page">
<input type="hidden" id="debug" value="False">
<input type="hidden" id="max_img_mb_size" value="3">
<input type="hidden" id="point_count" value="8">
<input type="hidden" name="main_coin_type" id="main_coin_type" value="SCRN">
<div class="g-container">
<div class="container">
<div id="manageMoney">
<h1>지급 및 차감</h1>
<div class="link-wrapper">
<a class="g-link" href="https://adt.kground.kr/List/DWList" id="manage_list_link">내역 보기</a>
</div>
<div class="g-shadowed-box">
<div class="g-w-370">
<div class="g-input-mb">
<div class="g-input-box">
<label>처리유형</label>
</div>
<div class="g-radio-btn">
<input type="radio" id="coin_point_SCRN" value="coin_point_SCRN" name="process_type" checked="">
<label for="coin_point_SCRN"><span></span>SCRN</label>
</div>
</div>
<div class="g-input-mb">
<div class="g-input-box g-w-370">
<label>처리형태</label>
</div>
<div class="row">
<div class="g-radio-btn" id="admin_payments_wrap">
<input type="radio" id="admin_payments" value="admin_payments" name="process_type_code" checked="">
<label for="admin_payments"><span></span>지급</label>
</div>
<div class="g-radio-btn" id="admin_deduction_wrap">
<input type="radio" id="admin_deduction" value="admin_deduction" name="process_type_code">
<label for="admin_deduction"><span></span>차감</label>
</div>
</div>
</div>
<div id="area_single">
<div class="g-input-box g-input-mb">
<label for="member_id">회원 아이디</label>
<div class="input-wrapper-with-btn">
<input name="member_id" id="member_id" type="text" placeholder="회원 아이디를 입력하세요." required="">
<input type="hidden" name="is_check_id" id="is_check_id" value="0">
<button type="button" class="g-btn style1" onclick="if (!window.__cfRLUnblockHandlers) return false; CheckExistence(&#39;member_id&#39;)">확인</button>
</div>
</div>
<div class="g-input-box g-input-mb hide" id="product_wrap">
<label for="product_idx"></label>
<div class="selectpicker-box col-12 pl-pr-none">
<div class="dropdown bootstrap-select" style="width: 100%;"><select name="product_idx" id="product_idx" class="selectpicker" data-dropup-auto="false" data-display="static" data-width="100%" title="전체" data-style="g-select" data-size="1" aria-expanded="false" required="" tabindex="-98"><option class="bs-title-option" value=""></option>
<option value="" selected="">선택</option>
</select><button type="button" class="btn dropdown-toggle bs-placeholder g-select" data-display="static" data-toggle="dropdown" role="button" data-id="product_idx" title="선택"><div class="filter-option"><div class="filter-option-inner"><div class="filter-option-inner-inner">선택</div></div> </div></button><div class="dropdown-menu " role="combobox" style="overflow: hidden;"><div class="inner show" role="listbox" aria-expanded="false" tabindex="-1" style="overflow-y: auto;"><ul class="dropdown-menu inner show"><li class="selected active"><a role="option" class="dropdown-item selected active" aria-disabled="false" tabindex="0" aria-selected="true"><span class="text">선택</span></a></li></ul></div></div></div>
</div>
</div>
<div class="g-input-box g-input-mb" id="sum_price_wrap">
<label for="sum_price">보유 수량</label>
<input id="sum_price" value="" type="text" disabled="">
</div>
<div class="g-input-box g-input-mb hide" id="payments_possible_amount_wrap">
<label for="payments_possible_amount">지급 가능 수량</label>
<input id="payments_possible_amount" value="" type="text" disabled="">
</div>
<div class="g-input-box g-input-mb hide" id="product_min_amount_wrap">
<label for="product_min_amount">최소금액</label>
<input id="product_min_amount" value="" type="text" disabled="">
</div>
<div class="g-input-box g-input-mb hide" id="product_max_amount_wrap">
<label for="product_max_amount">최대금액</label>
<input id="product_max_amount" value="" type="text" disabled="">
</div>
<div class="g-input-box g-input-mb hide" id="product_buy_vield_wrap">
<label for="product_buy_vield">수익률</label>
<input id="product_buy_vield" value="" type="text" disabled="">
</div>
<div class="g-input-box g-input-mb hide" id="product_amount_wrap">
<label for="product_amount">원가</label>
<input name="product_amount" id="product_amount" placeholder="원가를 입력하세요." type="text" required="">
</div>
<div class="g-input-box g-input-mb hide" id="product_sale_amount_wrap">
<label for="product_sale_amount">판매가</label>
<input id="product_sale_amount" value="" type="text" disabled="">
</div>
<div class="g-input-box g-input-mb hide" id="one_product_reservation_wrap">
<label for="one_product_reservation_count">1회 구매예약시 소요 </label>
<input id="one_product_reservation_count" value="" type="text" disabled="">
</div>
<div class="g-input-box g-input-mb hide" id="sum_product_buy_way_quantity_wrap">
<label for="sum_product_buy_way_quantity">보유 </label>
<input id="sum_product_buy_way_quantity" value="" type="text" disabled="">
</div>
<div class="g-input-box g-input-mb hide" id="product_reservation_possible_wrap">
<label for="product_reservation_possible_count">구매예약 가능수량</label>
<input id="product_reservation_possible_count" value="" type="text" disabled="">
</div>
<div class="g-input-box g-input-mb" id="area_amount">
<label for="amount">지급 수량</label>
<input type="text" name="amount" id="amount" placeholder="수량을 입력하세요.(&#39;,&#39; 제외)" maxlength="28" required="">
</div>
<div class="g-input-box g-input-mb hide" id="area_token_id">
<label for="token_id">TOKEN ID</label>
<div class="input-wrapper-with-btn">
<input type="tel" name="token_id" id="token_id" placeholder="TOKEN ID를 입력하세요." maxlength="10" required="">
<input type="hidden" name="is_check_token_id" id="is_check_token_id" value="0">
<button type="button" class="g-btn style1" onclick="if (!window.__cfRLUnblockHandlers) return false; CheckExistence(&#39;token_id&#39;)">확인</button>
</div>
<p class="notice">※ 지급가능 조건(아래 조건 모두 충족하여야 지급 가능)</p>
<p class="notice mt-none ml-14">
1. 출금 이력이 있는 TOKEN ID<br>
2. 현재 회원이 보유하고 있지 않는 TOKEN ID<br>
</p>
</div>
<div class="g-input-box g-input-mb hide" id="take_product_buy_way_quantity_wrap">
<label for="take_product_buy_way_quantity">소요 </label>
<input id="take_product_buy_way_quantity" value="" type="text" disabled="">
</div>
<div class="g-input-box g-input-mb hide" id="use_end_date_wrap">
<label for="use_end_date">유효기간 종료일 ( yyyy-MM-dd )</label>
<input name="use_end_date" id="use_end_date" placeholder="예 : 2020-01-01" type="text" maxlength="10" required="">
</div>
<div class="g-input-box">
<label for="memo">사유</label>
<input name="memo" id="memo" placeholder="사유를 입력하세요." type="text" maxlength="100" required="">
</div>
</div>
</div>
</div>
<div class="g-form-btn-box">
<button class="g-btn" type="button" onclick="if (!window.__cfRLUnblockHandlers) return false; ManagePDProcess()">확인</button>
</div>
</div>
<input type="hidden" name="existence_check_type" id="existence_check_type">
<input type="hidden" id="matching_start_date" value="">
<input type="hidden" id="matching_end_date" value="">
<input type="hidden" name="is_first_terminate_date_use" value="false">
<input type="hidden" name="coin_type" id="coin_type" value="SCRN">
<input type="hidden" name="point_name" id="point_name" value="">
<input type="hidden" name="encFile" id="encFile">
<input type="hidden" name="isEmailAuth" id="isEmailAuth" value="false">
<script type="text/javascript">
	var form = $("#frm");
	var check_elements_type;

	$(document).ready(function () {
		if ("False" === "True")
		{
			$("label.g-checkbox").click(function () {
				if ($("input:checkbox[name=batch_check]").is(":checked")) {
					$(".checkmark").toggleClass("active");
				}

				BatchAreaControl();
			});
		}

		ProcessTypeControl();

		$("input[name=process_type]").click(function () {
			ProcessTypeControl();
		});
		$("input[name=process_type_code]").click(function () {
			ProcessTypeCodeControl();
		});
		$("input[name=is_lock]").click(function () {
			SetLockupAreaSetting();
		});
		$('#product_amount').keyup(function () {
			GetSaleAmount();
		});
		$('#product_amount').keydown(function () {
			GetSaleAmount();
		});
		$('#product_amount').keypress(function () {
			GetSaleAmount();
		});
		$('#product_amount').blur(function () {
			GetSaleAmount();
		});

		$('#amount').keyup(function () {
			GetTakeProductBuyWayQuantity();
		});
		$('#amount').keydown(function () {
			GetTakeProductBuyWayQuantity();
		});
		$('#amount').keypress(function () {
			GetTakeProductBuyWayQuantity();
		});
		$('#amount').blur(function () {
			GetTakeProductBuyWayQuantity();
		});

		$('#product_idx').change(function () {
			ProductSelectControl();
		});
	});

	function ProductSelectControl() {
		var process_type = $("input[name=process_type]:checked").val();

		if (process_type === "product" || process_type === "product_reservation") {
			var array_product_info = $("#product_idx option:selected").val().split("/");
			if (process_type === "product") {
				$("#product_min_amount").val(SetComma(array_product_info[1]));
				$("#product_max_amount").val(SetComma(array_product_info[2]));
				$("#product_buy_vield").val(SetComma(array_product_info[3]));
			}
			else {
				$("#one_product_reservation_count").val(SetComma(array_product_info[4]));
			}
		}
	}

	function GetSaleAmount() {
		var revenue_amount = "";
		var product_sale_amount = "";
		var product_amount = parseFloat($.trim($("#product_amount").val()));
		var product_buy_vield = parseFloat($.trim($("#product_buy_vield").val()));
		revenue_amount = product_amount * product_buy_vield / 100;
		revenue_amount = $("#coin_type").toLowerCase() === "krw" ? Math.floor(revenue_amount) : revenue_amount;

		if (isNaN(revenue_amount) === false) {
			product_sale_amount = parseFloat(revenue_amount) + product_amount;
			if (revenue_amount.toString().indexOf(".") !== -1) {
				product_sale_amount = GetFloor(product_sale_amount, 1);
			}
		}
		$("#product_sale_amount").val(product_sale_amount);
	}

	function GetTakeProductBuyWayQuantity() {
		var process_type = $("input[name=process_type]:checked").val();
		if (process_type === "product_reservation")
		{
			var product_buy_way_quantity = parseInt($.trim($("#amount").val()));
			var one_product_reservation_count = parseInt(SetRemoveComma($.trim($("#one_product_reservation_count").val())));
			var take_product_buy_way_quantity = one_product_reservation_count * product_buy_way_quantity;

			if (isNaN(take_product_buy_way_quantity)) {
				take_product_buy_way_quantity = "";
			}
			else {
				if (take_product_buy_way_quantity.toString().indexOf(".") !== -1) {
					take_product_buy_way_quantity = take_product_buy_way_quantity.toString().split(".")[0];
				}
			}
			$("#take_product_buy_way_quantity").val(take_product_buy_way_quantity);
		}
	}

	function ProcessTypeControl() {
		$("#admin_payments_wrap").removeClass("hide");
		$("#admin_deduction_wrap").removeClass("hide");
		$("#sum_price_wrap").removeClass("hide");
		$("#product_wrap").removeClass("hide");
		$("#use_end_date_wrap").removeClass("hide");
		$("#product_min_amount_wrap").removeClass("hide");
		$("#product_max_amount_wrap").removeClass("hide");
		$("#product_buy_vield_wrap").removeClass("hide");
		$("#product_amount_wrap").removeClass("hide");
		$("#product_sale_amount_wrap").removeClass("hide");
		$("#payments_possible_amount_wrap").removeClass("hide");
		$("#admin_payments").prop('checked', false);
		$("#admin_deduction").prop('checked', false);
		$("#is_check_id").val("0");
		$("#member_id").val("");
		$("#sum_price").val("");
		$("#payments_possible_amount").val("");
		$("#amount").val("");
		$("#memo").val("");
		$("#use_end_date").val("");
		$("#product_idx option:eq(1)").prop("selected", true);
		$("label[for='admin_payments']").html("<span></span>지급");
		$("#sum_product_buy_way_quantity_wrap").removeClass("hide");
		$("#one_product_reservation_wrap").removeClass("hide");
		$("#product_reservation_possible_wrap").removeClass("hide");
		$("#sum_product_buy_way_quantity").val("");
		$("#one_product_reservation_count").val("");
		$("#product_reservation_possible_count").val("");
		$("#take_product_buy_way_quantity_wrap").removeClass("hide");
		$("#take_product_buy_way_quantity").val("");
		$("#coin_type").val("");
		$("#point_name").val("");
		$("#area_is_lock").removeClass("hide");
		$("#area_is_lock").addClass("hide");
        $("#area_amount").removeClass("hide");
        $("#area_token_id").addClass("hide");
		$('.selectpicker').selectpicker('refresh');

		var process_type = $("input[name=process_type]:checked").val();
		var manage_list_link = "";

        if (process_type === "nft") {
			$("#admin_payments_wrap").removeClass("hide");
			$("#admin_payments").prop('checked', true);
			$("#admin_deduction_wrap").addClass("hide");
            $("#product_wrap").addClass("hide");
            $("#use_end_date_wrap").addClass("hide");
            $("#product_min_amount_wrap").addClass("hide");
            $("#product_max_amount_wrap").addClass("hide");
            $("#product_buy_vield_wrap").addClass("hide");
            $("#product_amount_wrap").addClass("hide");
            $("#product_sale_amount_wrap").addClass("hide");
            $("#payments_possible_amount_wrap").addClass("hide");
            $("#sum_product_buy_way_quantity_wrap").addClass("hide");
            $("#one_product_reservation_wrap").addClass("hide");
            $("#product_reservation_possible_wrap").addClass("hide");
			$("#take_product_buy_way_quantity_wrap").addClass("hide");
			$("#area_token_id").removeClass("hide");
			$("#area_amount").addClass("hide");
			$("#sum_price_wrap").addClass("hide");

            manage_list_link = "NftTransactionList";
            check_elements_type = "#member_id, #token_id, #memo";
        }
		else if (process_type === "package") {
			$("#admin_payments_wrap").addClass("hide");
			$("#admin_deduction_wrap").css("margin-left", "0px");
			$("#admin_deduction").prop('checked', true);
			$("#product_wrap").addClass("hide");
			$("#use_end_date_wrap").addClass("hide");
			$("#product_min_amount_wrap").addClass("hide");
			$("#product_max_amount_wrap").addClass("hide");
			$("#product_buy_vield_wrap").addClass("hide");
			$("#product_amount_wrap").addClass("hide");
			$("#product_sale_amount_wrap").addClass("hide");
			$("#payments_possible_amount_wrap").addClass("hide");
			$("#sum_product_buy_way_quantity_wrap").addClass("hide");
			$("#one_product_reservation_wrap").addClass("hide");
			$("#product_reservation_possible_wrap").addClass("hide");
			$("#take_product_buy_way_quantity_wrap").addClass("hide");

			manage_list_link = "PackageList";
			check_elements_type = "#member_id, #token_id, #memo";
		}
		else if (process_type === "product") {
			$("#sum_price_wrap").addClass("hide");
			$("#admin_deduction_wrap").addClass("hide");
			$("#admin_payments").prop('checked', true);
			$("#product_min_amount_wrap").removeClass("hide");
			$("#product_max_amount_wrap").removeClass("hide");
			$("#product_buy_vield_wrap").removeClass("hide");
			$("#product_amount_wrap").removeClass("hide");
			$("#product_sale_amount_wrap").removeClass("hide");
			$("#payments_possible_amount_wrap").addClass("hide");
			$("#sum_product_buy_way_quantity_wrap").addClass("hide");
			$("#one_product_reservation_wrap").addClass("hide");
			$("#product_reservation_possible_wrap").addClass("hide");
			$("#take_product_buy_way_quantity_wrap").addClass("hide");

			manage_list_link = "ProductPossessionList";
			check_elements_type = "#member_id, #amount, #memo, #product_idx, #use_end_date, #product_amount";
			ProductSelectControl();
		}
		else if (process_type === "product_reservation") {
			$("#sum_price_wrap").addClass("hide");
			$("#use_end_date_wrap").addClass("hide");
			$("#product_min_amount_wrap").addClass("hide");
			$("#product_max_amount_wrap").addClass("hide");
			$("#product_buy_vield_wrap").addClass("hide");
			$("#product_amount_wrap").addClass("hide");
			$("#product_sale_amount_wrap").addClass("hide");
			$("#payments_possible_amount_wrap").addClass("hide");

			$("label[for='admin_payments']").html("<span></span>구매예약");
			$("#admin_deduction_wrap").addClass("hide");
			$("#admin_payments").prop('checked', true);
			$("#sum_product_buy_way_quantity_wrap").removeClass("hide");
			$("#one_product_reservation_wrap").removeClass("hide");
			$("#product_reservation_possible_wrap").removeClass("hide");
			$("#take_product_buy_way_quantity_wrap").removeClass("hide");

			manage_list_link = "ProductBuyReservationList";
			check_elements_type = "#member_id, #amount, #memo, #product_idx";
			ProductSelectControl();
		}
		else {
			$("#admin_payments").prop('checked', true);
			$("#product_wrap").addClass("hide");
			$("#use_end_date_wrap").addClass("hide");
			$("#product_min_amount_wrap").addClass("hide");
			$("#product_max_amount_wrap").addClass("hide");
			$("#product_buy_vield_wrap").addClass("hide");
			$("#product_amount_wrap").addClass("hide");
			$("#product_sale_amount_wrap").addClass("hide");
			$("#sum_product_buy_way_quantity_wrap").addClass("hide");
			$("#one_product_reservation_wrap").addClass("hide");
			$("#product_reservation_possible_wrap").addClass("hide");
			$("#take_product_buy_way_quantity_wrap").addClass("hide");

			if (process_type === "credit") {
				$("#payments_possible_amount_wrap").removeClass("hide");
				manage_list_link = "CreditList";
			}
			else {
				$("#payments_possible_amount_wrap").addClass("hide");
				if (process_type.indexOf("coin_point_") !== -1) {
					manage_list_link = "DWList";
				}
				else if (process_type === "product_buy_way") {
					manage_list_link = "FeeList";
				}
				else if (process_type === "point" || process_type.indexOf("change_point_") !== -1) {
					manage_list_link = "PointList";
				}
			}

			if (process_type.indexOf("coin_point_") !== -1) {
				$("#coin_type").val(process_type.split("_")[2]);
			}
			if (process_type.indexOf("change_point_") !== -1) {
				$("#point_name").val(process_type.split("_")[2]);
			}

			check_elements_type = "#member_id, #amount, #memo";
		}

		$("#manage_list_link").attr("href", "/List/" + manage_list_link);
		ProcessTypeCodeControl();
	}

	function ProcessTypeCodeControl() {
		var process_type_code = $("input[name=process_type_code]:checked").val();
		$("label[for='amount']").text($("label[for='" + process_type_code + "']").text() + " 수량");
		var process_type = $("input[name=process_type]:checked").val();

		if ("False" === "True") {
			$("input:checkbox[id='batch_check']").prop("checked", false);
			$(".checkmark").removeClass("active");

			if (process_type.indexOf("coin_point_") !== -1 && process_type_code === "admin_payments") {
				$("#area_batch_check").removeClass("hide");
			}
			else {
				$("#area_batch_check").addClass("hide");
			}

			BatchAreaControl();
		}

		if (process_type.indexOf("coin_point_") !== -1) {
			if ("False" === "True") {
				if (process_type_code === "admin_payments") {
					$("#area_is_lock").removeClass("hide");
					SetLockupAreaSetting();
				}
				else {
					$("#area_is_lock").addClass("hide");
					$("#area_terminate_date").addClass("hide");
					$("#area_terminate_rate").addClass("hide");
				}
			}
		}

		if (process_type === "credit") {
			$("#payments_possible_amount_wrap").removeClass("hide");
			if (process_type_code === "admin_deduction") {
				$("#payments_possible_amount_wrap").addClass("hide");
			}
		}
	}

	function SetLockupAreaSetting() {
		var is_lock = $("input[name=is_lock]:checked").val();
		$("#terminate_date option:eq(1)").prop("selected", true);
		$("#first_terminate_year option:eq(1)").prop("selected", true);
		$("#first_terminate_month option:eq(1)").prop("selected", true);
		$("#first_terminate_day option:eq(1)").prop("selected", true);
		$('.selectpicker').selectpicker('refresh');
		$("#terminate_rate").val("");

		if (is_lock.toString() === "true") {
			$("#area_terminate_date").removeClass("hide");
			$("#area_terminate_rate").removeClass("hide");
		}
		else {
			$("#area_terminate_date").addClass("hide");
			$("#area_terminate_rate").addClass("hide");
		}
	}

	function BatchAreaControl() {
		var is_batch_checked = $("input:checkbox[name=batch_check]").is(":checked");
		$("#batch_file").val("");

		if (is_batch_checked) {
			$("#area_single").addClass("hide");
			$("#area_batch").removeClass("hide");
		}
		else {
			$("#area_single").removeClass("hide");
			$("#area_batch").addClass("hide");
		}
	}

	function ManagePDProcess() {
		var success = true;
		var process_type = $("input[name=process_type]:checked").val();
		var action_type = "manage_pd";
		var is_batch_checked = false;

		if (process_type.indexOf("coin_point_") !== -1) {
			action_type = "manage_pd";
			if ("False") {
				is_batch_checked = $("input:checkbox[name=batch_check]").is(":checked");
			}
		}
		else if (process_type === "product_buy_way") {
			action_type = "manage_product_buy_way";
		}
		else if (process_type === "package") {
			action_type = "manage_package";
		}
		else if (process_type === "point") {
			action_type = "manage_point";
		}
		else if (process_type === "product") {
			action_type = "manage_product";
		}
		else if (process_type === "credit") {
			action_type = "manage_credit";
		}
		else if (process_type === "product_reservation") {
			action_type = "manage_product_reservation";
		}
		else if (process_type.indexOf("change_point_") !== -1) {
			action_type = "manage_change_point";
		}
        else if (process_type === "nft") {
            action_type = "manage_nft";
        }

		var process_type_code = $("input[name=process_type_code]:checked").val();

		if (process_type === "product" || process_type === "product_buy_way") {
			var today = new Date();
			var now_hour = parseInt(today.getHours());
			var now_minute = parseInt(today.getMinutes());
			var matching_start_date = parseInt($.trim($("#matching_start_date").val()).split(":")[0]);
			var matching_end_date = parseInt($.trim($("#matching_end_date").val()).split(":")[0]);
			var page_connection_minutes = 30;
			var array_today = GetToday().split('-');
			var array_use_end_date;
			var use_end_date;
			var compare_use_end_date;

			if (now_hour === (matching_start_date - 1)) {
				if (now_minute >= 50) {
					alert("매칭시간 10분전에는 처리가 불가능합니다.");
					return;
				}
			}
			else if (now_hour === matching_start_date) {
				if (now_minute <= page_connection_minutes) {
					alert("매칭중입니다. " + matching_start_date.toString() + ":" + page_connection_minutes.toString() + " 부터 가능합니다.");
					return;
				}
			}

			if (process_type === "product") {
				array_use_end_date = $.trim($("#use_end_date").val()).split('-');
				use_end_date = new Date(array_use_end_date[0], array_use_end_date[1], array_use_end_date[2]);
				compare_use_end_date = new Date(array_today[0], array_today[1], array_today[2]);

				if (compare_use_end_date.getTime() > use_end_date.getTime()) {
					alert("유효기간 종료일은 현재일자보다 작을 수 없습니다.");
					return;
				}
			}
		}

		if (process_type.indexOf("coin_point_") !== -1 && "False" === "True") {
			var is_lock = $("input[name=is_lock]:checked").val();
			if (is_lock.toString() === "true") {
				if ("False" === "True") {
					check_elements_type += ", #first_terminate_year, #first_terminate_month, #first_terminate_day";
				}
				else {
					check_elements_type += ", #terminate_date";
				}
				check_elements_type += ", #terminate_rate";
			}
		}

		if (!is_batch_checked) {
			form.find(check_elements_type).each(function () {
				obj = $(this);
				var id = obj.attr("id");

				success = CheckValidation(id, true, true);
				if (!success) {
					obj.focus();
					return success;
				}
			});
		}

		if (success) {
			var amount;

			if (process_type === "product") {
				array_use_end_date = $.trim($("#use_end_date").val()).split('-');
				use_end_date = new Date(array_use_end_date[0], array_use_end_date[1], array_use_end_date[2]);
				compare_use_end_date = new Date(array_today[0], array_today[1], array_today[2]);

				if (compare_use_end_date.getTime() === use_end_date.getTime()) {
					var product_max_amount = parseFloat(SetRemoveComma($.trim($("#product_max_amount").val())));
					var product_sale_amount = parseFloat($.trim($("#product_sale_amount").val()));
					if (product_sale_amount >= product_max_amount) {
						alert("금일 지급건은 판매가가 최대금액 이상일 수 없습니다.");
						return;
					}
				}
			}
			else if (process_type === "credit") {
				amount = parseInt($.trim($("#amount").val()));
				var sum_price = parseInt(SetRemoveComma($.trim($("#sum_price").val())));
				var payments_possible_amount = parseInt(SetRemoveComma($.trim($("#payments_possible_amount").val())));

				if (process_type_code === "admin_payments") {
					if (amount > payments_possible_amount) {
						alert("지급 가능 수량을 확인해 주세요.");
						return;
					}
				}
				else {
					if (amount > sum_price) {
						alert("차감 가능 수량을 확인해 주세요.");
						return;
					}
				}
			}
			else if (process_type === "product_reservation") {
				var one_time_max_product_reservation_count = 500;
				amount = parseInt($.trim($("#amount").val()));
				var product_reservation_possible_count = parseInt(SetRemoveComma($.trim($("#product_reservation_possible_count").val())));
				var sum_product_buy_way_quantity = parseInt(SetRemoveComma($.trim($("#sum_product_buy_way_quantity").val())));
				var take_product_buy_way_quantity = parseInt(SetRemoveComma($.trim($("#take_product_buy_way_quantity").val())));

				if (amount > product_reservation_possible_count) {
					alert("구매예약 가능수량을 확인해 주세요.");
					return;
				}
				else if (take_product_buy_way_quantity > sum_product_buy_way_quantity) {
					alert("보유" + "" + "를 확인해 주세요.");
					return;
				}
				else if (amount > one_time_max_product_reservation_count) {
					alert("구매예약은 1회 최대 " + SetComma(one_time_max_product_reservation_count) + "회 까지 가능합니다.");
					return;
				}
			}

			if (is_batch_checked) {
				var batch_file = $("#batch_file").val();
				if (batch_file === "") {
					alert('파일을 업로드 해주세요.');
					return;
				}
				else {
					var ext = $("#batch_file").val().split('.').pop().toLowerCase();
					if ($.inArray(ext, ['xlsx']) == -1) {
						alert('xlsx 파일만 업로드 할수 있습니다.');
						$("#batch_file").val("");
						return;
					}
				}
			}

			if (confirm($("label[for='" + process_type_code + "']").text() + "하시겠습니까?")) {
				CallSubmit(false, action_type, "post", "json", is_batch_checked);
			}
		}
	}
</script>
</div>
</div>
<div class="modal fade" id="memo-modal" tabindex="-1" role="dialog" aria-labelledby="memo-modal" aria-hidden="true">
<div class="modal-dialog modal-dialog-centered modal-dialog-scrollable" role="document">
<div class="modal-content">
<div class="modal-header">
<h5 class="modal-title" id="memo_title">TXID</h5>
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<img src="./지급 및 차감_files/icon-close.svg" alt="닫기" data-translate-alt="key-00093">
</button>
</div>
<div class="modal-body" id="memo" style="text-align:left;"></div>
<div class="modal-footer"></div>
</div>
</div>
</div>
<div class="modal fade" id="personalData" tabindex="-1" role="dialog" aria-labelledby="common_modal" aria-hidden="true"></div>
</form>
<div class="ring-back">
<div class="lds-ring">
<div></div>
<div></div>
<div></div>
<div></div>
</div>
</div>

</body></html>